---


---

<h2 id="life-miles-authentication">Life Miles Authentication</h2>
<p>This authentication strategy will be based on <strong>CHAP</strong> <em>(Challenge-Handshake Authentication Protocol)</em> protocol where three factors included from the start to the end.</p>
<p><strong>Description</strong></p>
<ol>
<li>User requests a new login from the App</li>
<li>API returns a valid login URL</li>
<li>A browser itâ€™s opened from the App with the Login form</li>
<li>LifeMiles returns needed information for a callback URL in our API</li>
<li>API returns the final information to the APP</li>
</ol>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-5o8sq8FRbSXzT3u4" height="100%" width="100%" style="max-width:750px;" viewBox="-50 -10 750 469"><g></g><g><line id="actor9" x1="75" y1="5" x2="75" y2="458" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">App</tspan></text></g><g><line id="actor10" x1="275" y1="5" x2="275" y2="458" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">API</tspan></text></g><g><line id="actor11" x1="475" y1="5" x2="475" y2="458" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">LifeMiles</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">Authenticate this user</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="128" class="messageText" style="text-anchor: middle;">Success authentication</text><line x1="475" y1="135" x2="275" y2="135" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="163" class="messageText" style="text-anchor: middle;">Here you got the URL</text><line x1="275" y1="170" x2="75" y2="170" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="198" class="messageText" style="text-anchor: middle;">User was authenticated</text><line x1="275" y1="205" x2="75" y2="205" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="500" y="215" fill="#EDF2AE" stroke="#666" width="150" height="88" rx="0" ry="0" class="note"></rect><text x="496" y="239" fill="black" class="noteText"><tspan x="516" fill="black">Note that Lifemiles</tspan></text><text x="496" y="256" fill="black" class="noteText"><tspan x="516" fill="black"> won't response after</tspan></text><text x="496" y="273" fill="black" class="noteText"><tspan x="516" fill="black">user authenticates</tspan></text><text x="496" y="290" fill="black" class="noteText"><tspan x="516" fill="black">with their Platform.</tspan></text></g><g><text x="175" y="331" class="messageText" style="text-anchor: middle;">Authenticating to LifeMiles</text><line x1="275" y1="338" x2="75" y2="338" class="messageLine1" stroke-width="2" stroke="black" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="366" class="messageText" style="text-anchor: middle;">Waiting for API's callback response</text><line x1="75" y1="373" x2="475" y2="373" class="messageLine0" stroke-width="2" stroke="black" style="fill: none;"></line></g><g><rect x="0" y="393" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="425.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">App</tspan></text></g><g><rect x="200" y="393" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="425.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">API</tspan></text></g><g><rect x="400" y="393" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="425.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">LifeMiles</tspan></text></g></svg></div>
<p>And this will produce a flow chart:</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-o5YKSG2qXGgb9t8l" width="100%" style="max-width: 608.6843719482422px;" viewBox="0 0 608.6843719482422 171"><g transform="translate(-12, -12)"><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M67.64876760563381,81L116.1875,33L212.7265625,33L309.265625,33L359.1348049004178,58.14486833860393" marker-end="url(#arrowhead136)" style="fill:none"></path><defs><marker id="arrowhead136" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M68.78125,104L116.1875,104L163.59375,104" marker-end="url(#arrowhead137)" style="fill:none"></path><defs><marker id="arrowhead137" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M402.671875,68.5L450.078125,68.5L510.44946625504633,85.53491027083261" marker-end="url(#arrowhead138)" style="fill:none"></path><defs><marker id="arrowhead138" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M519.9021495646421,119.91777609052099L450.078125,162L379.671875,162L309.265625,162L212.7265625,162L116.1875,162L68.78125,123.70359085963003" marker-end="url(#arrowhead139)" style="fill:none"></path><defs><marker id="arrowhead139" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M261.859375,104L309.265625,104L359.1348049004178,78.85513166139607" marker-end="url(#arrowhead140)" style="fill:none"></path><defs><marker id="arrowhead140" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(212.7265625,33)" style="opacity: 1;"><g transform="translate(-22.40625,-13)" class="label"><foreignObject width="44.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Step 1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(116.1875,104)" style="opacity: 1;"><g transform="translate(-22.40625,-13)" class="label"><foreignObject width="44.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Step 4</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(450.078125,68.5)" style="opacity: 1;"><g transform="translate(-22.40625,-13)" class="label"><foreignObject width="44.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Step 2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(309.265625,162)" style="opacity: 1;"><g transform="translate(-22.40625,-13)" class="label"><foreignObject width="44.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Step 3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(309.265625,104)" style="opacity: 1;"><g transform="translate(-22.40625,-13)" class="label"><foreignObject width="44.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Step 5</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="A" transform="translate(44.390625,104)" style="opacity: 1;"><rect rx="0" ry="0" x="-24.390625" y="-23" width="48.78125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-14.390625,-13)"><foreignObject width="28.78125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">App</div></foreignObject></g></g></g><g class="node" id="B" transform="translate(379.671875,68.5)" style="opacity: 1;"><circle x="-22.4609375" y="-23" r="23"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-12.4609375,-13)"><foreignObject width="24.921875" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">API</div></foreignObject></g></g></g><g class="node" id="C" transform="translate(212.7265625,104)" style="opacity: 1;"><rect rx="5" ry="5" x="-49.1328125" y="-23" width="98.265625" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-39.1328125,-13)"><foreignObject width="78.265625" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Login Form</div></foreignObject></g></g></g><g class="node" id="D" transform="translate(555.0843734741211,97.5)" style="opacity: 1;"><polygon points="57.6,0 115.2,-57.6 57.6,-115.2 0,-57.6" rx="5" ry="5" transform="translate(-57.6,57.6)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-31,-13)"><foreignObject width="62" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Lifemiles</div></foreignObject></g></g></g></g></g></g></svg></div>

